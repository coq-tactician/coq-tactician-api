(coq.theory
 (name Tactician)
 (package coq-tactician-reinforce)
 (flags -q -noinit)
 (modules )
 (libraries
   coq-tactician-reinforce.plugin)
)

(include_subdirs qualified)

(rule
 (targets NNLearner.v)
 ; When installed through opam, we perform substitutions through the 'substs' directive in the opam file.
 ; It also works using this rule, but running opam during an installation can be risky due to sandboxing issues.
 (mode fallback)
 (deps NNLearner.v.in)
 (action (run opam config subst %{targets})))

; Workaround for https://github.com/ocaml/dune/issues/4258. Should be fixed in coq 8.12, but will have to remain until we migrate from 8.11
(install
 (files (NNLearner.v as coq/user-contrib/Tactician/NNLearner.v))
 (section lib_root)
)
