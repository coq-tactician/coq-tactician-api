(coq.pp (modules g_graph))
(library
 (name tactician_reinforce_plugin)
 (public_name coq-tactician-reinforce.plugin)
 (flags :standard -rectypes -w -27-53-55 -warn-error -A)
 (modules (
   "g_graph"
    visualizer
    graph_extractor
    graph_def
    dag_def
    dag_extractor
    dag_visualizer
    nn_embedding_learner
    reinforce
    graph_generator_learner
    dag_generator_learner
    dag_capnp_generator
    graph_api
    dag_api
 ))
 (libraries
   capnp capnp.unix lwt.unix capnp-rpc-unix capnp-rpc-lwt
   ocamlgraph
   coq-tactician.record-plugin)
 (preprocess (staged_pps ppx_deriving.show))
)

(rule
 (targets graph_api.ml graph_api.mli)
 (deps    ../graph_api.capnp)
 (action (run capnp compile -o %{bin:capnpc-ocaml} %{deps})))

(rule
 (targets dag_api.ml dag_api.mli)
 (deps    ../dag_api.capnp)
 (action (run capnp compile -o %{bin:capnpc-ocaml} %{deps})))
